Promise.all([
    fetch('geojson/contours_clipped_4326.geojson').then(res => res.json()),
    fetch('geojson/floodway_4326.geojson').then(res => res.json()),
    fetch('geojson/broadhead.geojson').then(res => res.json())
]).then(([contoursData, floodmapData, sitesData]) => {

    contours = L.geoJSON(contoursData, {
        style: { color: '#78866b', weight: 1 }
    }).addTo(map);

    floodmap = L.geoJSON(floodmapData, {
        style: { color: '#2b5d85', fillOpacity: 0.4 }
    }).addTo(map);

    sites = L.geoJSON(sitesData, {
        style: { color: '#d4af37', fillOpacity: 0.5 },
        onEachFeature: function (feature, layer) {
            layer.bindPopup(feature.properties.name || "Site");
        }
    }).addTo(map);

    var baseMaps = { "Streets": streets, "Satellite": satellite };
    var overlayMaps = { "Contours": contours, "Floodway": floodmap, "Broadhead Site": sites };
    L.control.layers(baseMaps, overlayMaps).addTo(map);
});


